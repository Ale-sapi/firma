<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabella con Aggiunta e Cancellazione</title>
    <style>
        table {
            width: 50%;
            border-collapse: collapse;
            margin: 20px auto;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ccc;
            text-align: center;
        }
        button {
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
        button:hover {
            background-color: darkred;
        }
    </style>
</head>
<body>

    <h2 style="text-align:center;">Aggiungi una stringa alla tabella</h2>

    <!-- Form per l'inserimento della stringa -->
    <form id="form" style="text-align:center;">
        <input type="text" id="inputString" placeholder="Inserisci una stringa di 5 numeri" maxlength="5" required>
        <button type="submit">Aggiungi</button>
    </form>

    <!-- Tabella per visualizzare le stringhe e il bottone per eliminarle -->
    <table id="table">
        <thead>
            <tr>
                <th>Elimina</th>
                <th>Stringa</th>
            </tr>
        </thead>
        <tbody>
            <!-- Le righe verranno aggiunte dinamicamente qui -->
        </tbody>
    </table>

    <script>
        // Array per memorizzare i dati
        let tableData = JSON.parse(localStorage.getItem("tableData")) || [];

        // Funzione per aggiornare la tabella
        function updateTable() {
            const tableBody = document.getElementById("table").getElementsByTagName('tbody')[0];
            tableBody.innerHTML = ""; // Pulisce la tabella

            // Aggiunge ogni riga dell'array alla tabella
            tableData.forEach((data, index) => {
                const row = tableBody.insertRow();
                
                // Aggiunge la colonna per il bottone di eliminazione
                const cell1 = row.insertCell(0);
                const deleteButton = document.createElement("button");
                deleteButton.textContent = "Cancella";
                deleteButton.onclick = function() {
                    deleteRow(index);
                };
                cell1.appendChild(deleteButton);

                // Aggiunge la colonna con la stringa
                const cell2 = row.insertCell(1);
                cell2.textContent = data;
            });
        }

        // Funzione per aggiungere una nuova riga alla tabella
        document.getElementById("form").addEventListener("submit", function(event) {
            event.preventDefault();
            
            const inputString = document.getElementById("inputString").value;

            // Verifica che la stringa contenga esattamente 5 numeri
            if (inputString.match(/^\d{5}$/)) {
                tableData.push(inputString); // Aggiunge la stringa all'array
                localStorage.setItem("tableData", JSON.stringify(tableData)); // Salva i dati in localStorage
                document.getElementById("inputString").value = ''; // Svuota il campo di input
                updateTable(); // Rende visibile l'array aggiornato nella tabella
            } else {
                alert("La stringa deve contenere esattamente 5 numeri.");
            }
        });

        // Funzione per cancellare una riga
        function deleteRow(index) {
            tableData.splice(index, 1); // Rimuove l'elemento dall'array
            localStorage.setItem("tableData", JSON.stringify(tableData)); // Salva i dati aggiornati
            updateTable(); // Rende visibile l'array aggiornato nella tabella
        }

        // Carica la tabella al caricamento della pagina
        window.onload = updateTable;
    </script>

</body>
</html>
